<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Portal | Eligo Recruitment</title>
    <link rel="icon" type="image/svg+xml"
        href="https://raw.githubusercontent.com/Samurii-Jack/Eligorecruitment/main/clients/ERLogo70.svg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Manrope:wght@700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="admin.css">
    <!-- Supabase JS Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>

    <!-- 1. LOGIN SCREEN -->
    <div id="login-screen">
        <div class="login-card">
            <img src="https://raw.githubusercontent.com/Samurii-Jack/Eligorecruitment/main/clients/ERLogo70.svg"
                alt="Eligo Logo" style="width: 80px; margin-bottom: 2rem;">
            <h2>Admin Login</h2>
            <form id="login-form">
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" id="login-email" required placeholder="admin@eligorecruitment.co.ke">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="login-password" required placeholder="••••••••">
                </div>
                <button type="submit" class="btn-login">Unlock Dashboard</button>
            </form>
            <p id="login-error" style="color: var(--error-red); margin-top: 1rem; font-size: 0.85rem; display: none;">
            </p>
        </div>
    </div>

    <!-- 2. MAIN DASHBOARD -->
    <div id="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 3rem;">
                <img src="https://raw.githubusercontent.com/Samurii-Jack/Eligorecruitment/main/clients/ERLogo70.svg"
                    alt="Logo" style="width: 40px;">
                <span style="font-weight: 800; color: var(--accent-gold); font-size: 1.2rem;">Portal</span>
            </div>

            <nav>
                <div class="nav-item active" data-section="applications">
                    <i class="fas fa-users"></i> Applications
                </div>
                <div class="nav-item" data-section="messages">
                    <i class="fas fa-envelope"></i> Messages
                </div>
                <div class="nav-item" data-section="jobs">
                    <i class="fas fa-briefcase"></i> Job Manager
                </div>
                <div class="nav-item" data-section="post-job">
                    <i class="fas fa-plus-circle"></i> Post New Job
                </div>
            </nav>

            <div style="margin-top: auto;">
                <div class="nav-item" id="logout-btn"
                    style="color: var(--error-red); border: 1px solid rgba(239, 68, 68, 0.2);">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="header">
                <div>
                    <h1 id="section-title">Applications</h1>
                    <p style="color: var(--text-light);">Manage your recruitment pipeline</p>
                </div>
                <div id="user-info" style="text-align: right;">
                    <span id="admin-email" style="display: block; font-weight: 600;"></span>
                    <span style="font-size: 0.75rem; color: var(--success-green);">Authorized Session</span>
                </div>
            </header>

            <!-- APPLICATIONS VIEW -->
            <section id="applications" class="section-panel active">
                <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
                    <input type="text" id="app-search" placeholder="Filter by Name or Job Title..." class="action-btn"
                        style="flex: 1; background: var(--bg-glass); height: 45px; text-align: left;">
                </div>
                <div class="data-table-container">
                    <table id="applications-table">
                        <thead>
                            <tr>
                                <th>Applicant</th>
                                <th>Job Title</th>
                                <th>Applied On</th>
                                <th>Status</th>
                                <th>CV</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Loaded via admin.js -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- MESSAGES VIEW -->
            <section id="messages" class="section-panel">
                <div class="data-table-container">
                    <table id="messages-table">
                        <thead>
                            <tr>
                                <th>Sender</th>
                                <th>Subject</th>
                                <th>Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>

            <!-- JOB MANAGER VIEW -->
            <section id="jobs" class="section-panel">
                <div class="data-table-container">
                    <table id="jobs-table">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Source</th>
                                <th>Status</th>
                                <th>Applications</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>

            <!-- POST JOB VIEW -->
            <section id="post-job" class="section-panel">
                <div class="login-card" style="max-width: 800px; text-align: left; margin: 0 auto;">
                    <h3 style="margin-bottom: 2rem; color: var(--accent-gold);">Create New Listing</h3>
                    <form id="new-job-form">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                            <div class="form-group">
                                <label>Job Title</label>
                                <input type="text" id="job-title" required>
                            </div>
                            <div class="form-group">
                                <label>Company</label>
                                <input type="text" id="job-company" required>
                            </div>
                            <div class="form-group">
                                <label>Location</label>
                                <input type="text" id="job-location" required>
                            </div>
                            <div class="form-group">
                                <label>Type</label>
                                <select id="job-type">
                                    <option value="Full-time">Full-time</option>
                                    <option value="Contract">Contract</option>
                                    <option value="Remote">Remote</option>
                                    <option value="On-site">On-site</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Salary Range</label>
                            <input type="text" id="job-salary" placeholder="e.g. $2,000 - $3,000">
                        </div>
                        <div class="form-group">
                            <label>Responsibilities (One per line)</label>
                            <textarea id="job-resp" rows="4"></textarea>
                        </div>
                        <button type="submit" class="btn-login" style="max-width: 200px;">Publish Job</button>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <script src="admin.js"></script>
</body>

</html>